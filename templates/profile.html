{% extends 'base.html' %}

{% block head %}
  <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/profile.css') }}">
   <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"> </script> 
  <title>uType - Profile({{user.username}})</title>
{% endblock %}

{% block content %}
<div class="profile-container">
  <div class="profile-header">
    <div class="profile-header-left">
      <img src="https://picsum.photos/200" alt="profile picture" class="profile-picture">
      <div class="profile-header-left-text">
        <p class="profile-name">{{ profile.name }}</p>
        <p class="profile-subtext profile-username">@{{ user.username }}</p>
        <p class="profile-subtext">{{ profile.state }}, {{ profile.country }}</p>
      </div>
    </div>
    <div class="profile-header-right">
      <p class="rank-text">#1</p>
    </div>
  </div>
  <div class="profile-details">
    <div class="profile-details-left">
      <h2 class="profile-block-header">About Me</h2>
      <p class="profile-bio">{{ profile.bio }}</p>
      <h2 class="profile-block-header">Tests</h2>
      <div class="profile-history">
        {% for test in user.tests %}
        <div class="history-row">
          <p class="history-row-timestamp">{{ test.timestamp }}</p>
          <p class="history-row-score">{{ test.score | float | round(1) }}</p>
          <p class="history-row-wpm">{{ test.wpm | float | round(1) }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="profile-details-right">
      <h2 class="profile-block-header">History</h2>
      <canvas id="history-chart"></canvas> 
      <h2 class="profile-block-header">Stats</h2>
      <div class="profile-stats">
        <div class="profile-stat-block">
          <p class="stat-name">Average WPM</p>
          <p class="stat-val">72</p>
        </div>
        <div class="profile-stat-block">
          <p class="stat-name">Average Score</p>
          <p class="stat-val">109.2</p>
        </div>
        <div class="profile-stat-block">
          <p class="stat-name">Average Accuracy</p>
          <p class="stat-val">95%</p>
        </div>
        <div class="profile-stat-block">
          <p class="stat-name">Highest WPM</p>
          <p class="stat-val">76.1</p>
        </div>
        <div class="profile-stat-block">
          <p class="stat-name">Highest Score</p>
          <p class="stat-val">131.4</p>
        </div>
        <div class="profile-stat-block">
          <p class="stat-name">Tests Given</p>
          <p class="stat-val">7</p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block footer %}
  <script src="{{ url_for('static',filename='js/profile.js') }}"></script>
{% endblock %}
